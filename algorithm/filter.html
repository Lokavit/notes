<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Filter</title>
</head>
<body>

</body>

<script>
    /**
 * 过滤数组中相同项 从数组中，删除重复项 [简单的数组项]
 */
const strings = ["AA", "BB", "AA", "AD", "BC", "AC", "AD"];
// filter函数本来就返回新数组，所以将逻辑写在内中，最终返回新数组。
const filteredStrings = strings.filter((item, index) => {
    // 如果当前项目的索引与该项目的第一次出现相同，则返回到新数组
    // console.log("ITEM:", item, `|| ${strings.indexOf(item)}`);

    return strings.indexOf(item) === index;
});
// console.log("删除重复项", filteredStrings);

const arr1 = [1, 2, 1, 2, 3, 5, 4, 5, 3, 4, 4, 4, 4];
const arr2 = arr1.filter((element, index, self) => {
    return self.indexOf(element) === index;
});
console.log(arr2); // [1, 2, 3, 5, 4]
console.log(arr1); // [1, 2, 1, 2, 3, 5, 4, 5, 3, 4, 4, 4, 4]

// 用于 过滤数组中相同的对象
const books = [{
        name: "1",
        author: "A",
    },
    {
        name: "2",
        author: "B",
    },
    {
        author: "B",
        name: "2",
    },
];

/**
 * 过滤数组中相同的对象 从数组中，删除重复项 [对象类型的数组项]
 * @param {*} arr 待删除的数组
 * use: removeDuplicates(books)
 */
function removeDuplicates(arr) {
    const result = [];
    const duplicatesIndices = [];

    // 循环遍历原始数组中的每个项目
    arr.forEach((current, index) => {
        if (duplicatesIndices.includes(index)) return;

        result.push(current);

        // 在当前项之后循环遍历数组中的其他项
        for (let comparisonIndex = index + 1; comparisonIndex < arr.length; comparisonIndex++) {
            const comparison = arr[comparisonIndex];
            const currentKeys = Object.keys(current);
            const comparisonKeys = Object.keys(comparison);

            // 检查对象中的键数
            if (currentKeys.length !== comparisonKeys.length) continue;

            // 检查键名
            const currentKeysString = currentKeys
                .sort()
                .join("")
                .toLowerCase();
            const comparisonKeysString = comparisonKeys
                .sort()
                .join("")
                .toLowerCase();
            if (currentKeysString !== comparisonKeysString) continue;

            // 检查值
            let valuesEqual = true;
            for (let i = 0; i < currentKeys.length; i++) {
                const key = currentKeys[i];
                if (current[key] !== comparison[key]) {
                    valuesEqual = false;
                    break;
                }
            }
            if (valuesEqual) duplicatesIndices.push(comparisonIndex);
        } // end for loop
    }); // end arr.forEach()

    return result;
}
</script>

</html>